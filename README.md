# Как подготовиться к работе с Node.js?
Node.js — программная платформа, которая позволяет создавать быстрые, эффективные и масштабируемые веб-приложения. То есть это не язык программирования, а надстройка над JavaScript. Она особенно полезна для стартапов и проектов с ограниченными ресурсами, так как позволяет быстро выпустить на рынок минимально жизнеспособный продукт. В рейтинге технологий для бэкенда от “Хабра” он занимает седьмое место. 

## Установка Node.js

В каждой операционной системе установка проходит по-разному. Мы рассмотрим процесс установки для Windows, MacOS и Linux Ubuntu. Если используете Windows, то рекомендую изначально прочитать следующий блок про установку WSL.

### Установка Node.js для Windows

Перед установкой необходимо удалить старые версии, если они были ранее установлены. Из-за предыдущих версий могут возникнуть конфликты.

#### Удаление предыдущих версий

Проверим систему на наличие версий Node.js. Для этого в cmd или в PowerShell выполняем команду `node -v` или `nvm list`:
```bash
C:\Users\stdout>nvm list
    20.1.0
    20.0.0
    16.17.0
```
Если такого вывода нет, то переходите к следующему блоку про установку.

Как видим, что установлено три версии. Удалим их:
```bash
# Выполняем команду  
npm cache clean --force.
```
В разделе настроек "Установка и удаление программ" удаляем Node.js. Потом перезагружаем компьютер. Также, удаляем следующие каталоги. Некоторые из них могут существовать, а некоторые, наоборот, отсутствовать:
C:\Program Files (x86)\Nodejs
C:\Program Files\Nodejs
C:\Users\{User}\AppData\Roaming\npm
C:\Users\{User}\AppData\Roaming\npm-cache
C:\Users\{User}\.npmrc
C:\Users\{User}\AppData\Local\Temp\npm-*

Если был установлен NVM, то далее возвращаемся в командную строку и выполняем команду `nvm uninstall` к каждой версии, полученной с помощью `nvm list`:
    
```bash    
C:\Users\stdout>nvm uninstall 20.1.0
Uninstalling node v18.9.0... done

C:\Users\stdout>nvm uninstall 20.0.0
Uninstalling node v18.9.0... done

C:\Users\stdout>nvm uninstall 16.17.0
Uninstalling node v18.9.0... done
```
  
Дополнительно проверим, что всё получилось:

```bash
C:\Users\stdout>nvm list
No installations recognized.

C:\Users\stdout>where node
ИНФОРМАЦИЯ: не удается найти файлы по заданным шаблонам.

C:\Users\stdout>where npm
ИНФОРМАЦИЯ: не удается найти файлы по заданным шаблонам.
```

Отлично! Теперь можем устанавливать. Тут будет несколько способов:

#### Установка с помощью nvm-windows
Node Version Manager или сокращенно NVM — это менеджер версий Node.js. Возможно, во время работы придётся использовать различные версии Node и переключаться между ними. Версии часто меняются, поэтому при работе рекомендуется использовать менеджер версий.

NVM — самый распространенный диспетчер версий, но есть нюанс. К сожалению, в Windows он не доступен, и вместо него используется адаптированный вариант nvm-windows. 

1. Перейдите в репозиторий [nvm-windows на GitHub](https://github.com/coreybutler/nvm-windows);
2. Загрузите установщик nvm-setup.exe для последней версии менеджера;
3. После загрузки установите;
4. По окончании работы установщика откройте PowerShell или cmd от имени администратора и проверьте работоспособность NVM:

```bash
PS C:\Windows\system32 > nvm list
No installations recognized.
```
  
Теперь выберите версию Node.js, которую будете устанавливать на свой компьютер. Команда nvm list available покажет частичный список доступных для загрузки версий. Если для работы не требуется определённая версия, то рекомендую выбрать последний LTS-выпуск. Риск возникновения проблем при работе с такой версией минимален. Установим последний LTS. На момент написаня статьи это 20.13.1. Возьмём номер версии из результата `nvm list available` и установим его с помощью `nvm install`:

```bash
PS C:\Windows\system32> nvm install 20.13.1
Downloading node.js version 20.13.1 (64-bit)...
Extracting...
Complete
Creating C:\Users\stdout\AppData\Roaming\nvm\temp

Downloading npm version 10.2.3… Complete
Installing npm v10.2.3…

Installation complete. If you want to use this version, type

nvm use 20.13.1
```
  
Юху! Установка завершена. Бывает, что при установке nvm-windows может возникнуть проблема: nvm не загрузит диспетчер пакетов NPM. В этом случае рекомендую установить без менеджера версий для Node.js. Про это как раз следующий блок.

#### Как установить node.js с официального сайта

1. Зайдите на официальный сайт [nodejs.org](https://nodejs.org/en);
2. Нажмите на кнопку "Установить" и загрузите LTS версию;
3. По завершению загрузки откройте файл, после чего начнется установка;
4. Следуйте инструкциям установщика.

Да, так просто. Но тут тоже есть свои нюансы. Например, так неудобно управлять версиями.

#### Установка Mode.js в WSL
Если на компьютере нет WSL, то начните со следующего блока про установку WSL. А так, если хотите использовать Node.js вместе с Docker, планируете работать с командной строке Bash или просто любите Linux, то точно понадобиться использовать Node.js в WSL. В целом, больше всего я рекомендую именно этот способ для Windows.

После установки WSL в Windows прочитайте блок, про установку Node.js в Linux Ubuntu.

### Установка Node.js в MacOS
Удивительно, но тут ситуация похожа на Windwos. Есть способ, где придётся пострадать и способ, когда страдать не придётся. И как назло, способ в котором нужно старадать — самый подходящий.

#### Установка с помощью nvm в MacOS
Node Version Manager или сокращенно NVM — это менеджер версий Node.js. Возможно, во время работы придётся использовать различные версии Node и переключаться между ними. Версии часто меняются, поэтому при работе рекомендуется использовать менеджер версий.

Тут ситуация сильно проще, чем в Windows. Буквально перед написанием этого гайда я узнал про самый простой способ установки. Ранее я прям очень страдал и один раз потратил час на установку, так как нормальных гайдов в интернете нет. 

В AppStore NVM найти не получиться, поэтому сначала нужно установить [Homebrew](https://brew.sh/). Для этого откройте окно терминала и выполните следующую команду:

```bash
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
```
Если что, то Homebrew это такой менеджер пакетов, который устанавливает программы на компьютер одной командой. Такая штука популярна в Linux. После установки Homebrew можно использовать его для установки nvm, выполнив следующую команду:
```bash
brew install nvm
```
Теперь добавьте nvm в свой профиль терминала. Такие штуки ещё называют переменными окружения. Это нужно для того, чтобы nvm был доступен каждый раз, когда открываете новое окно терминала. Более подробную информацию по завершению установки подскажет Homebrew:
```bash
source $(brew --prefix nvm)/nvm.sh
```

Ура! Теперь наконец можно установить Node.js:
```bash
nvm install node
```

NVM установит LTS версию. Чтобы использовать определённую версию Node.js с nvm, выполните следующие действия:
```bash
# Чтобы просмотреть список всех доступных версий Node.js, которые можно установить с помощью nvm, выполните следующую команду:
nvm ls-remote

# Чтобы установить определенную версию Node.js, например, версию 16, используйте следующую команду:
nvm install 16
```
После установки желаемой версии Node.js переключитесь на неё, выполнив следующую команду:
```bash
nvm use 16
```
Если хотите использовать определённую версию Node.js по-умолчанию – это не проблема. Используйте следующую команду:
```bash
nvm alias default 16
```
Версия 16 достаточно старая, поэтому, используйте последнюю LTS-версию.

#### Установка с официального сайта
Тут всё просто:
1. Зайдите на официальный сайт [nodejs.org](https://nodejs.org/en);
2. Нажмите на кнопку "Установить" и загрузите LTS версию;
3. По завершению загрузки откройте файл, после чего начнется установка;
4. Следуйте инструкциям установщика.

Да, так просто. Но тут тоже есть свои нюансы. Например, так неудобно управлять версиями.

### Установка Node.js в Linux Ubuntu
Самый маленький блок из гайда. Чтобы установить Node.js в Ubuntu, можно воспользоваться двумя способами. Через пакетный менеджер Ubuntu apt или через архив персональных пакетов PPA. Я бы рекомендовал второй способ, так как получится скачать более актуальную версию.
#### Установка через пакетный менеджер
Откройте терминал и обновите локальный индекс пакетов:
```bash
sudo apt update
```
Далее установите Node.js и менеджер пакетов npm: 
```bash
sudo apt install nodejs npm
```
Проверьте установку, выполнив команды:
```bash
nodejs -v && npm -v
```
#### Установка через архив персональных пакетов PPA
Откройте терминал и установите PPA для Node.js
```bash
curl -sL https://deb.nodesource.com/setup_20.x -o nodesource_setup.sh
# где 20.x - версия Node.js.
```
Запустите скрипт установки PPA с правами суперпользователя: 
```bash
sudo bash nodesource_setup.sh
```
Установите Node.js: 
```bash
sudo apt install nodejs.
```
Проверьте установку, выполнив команды:
```bash
nodejs -v && npm -v
```
Оба метода позволяют легко и быстро установить Node.js в Ubuntu.

## Установка WSL

Если хотите, чтобы работа с Node.js на Windows была максимально гладкой, то рекомендую сначала установить [WSL](https://learn.microsoft.com/en-us/windows/wsl/). По сути мы установим Linux Ubuntu прямо в Windows и все задачи связанные с программированием будет выполнять там. Обратите внимание, что WSL поддерживается не на всех версиях Windows и могут возникнуть сложности с установкой. Поэтому, если действия в этом блоке проделать не получилось, то вернитесь к прошлому блоку, где мы установим Node.js на Windows без WSL.

Перед тем, как начать установку проведём небольшой чек-лист готовности:
1. Есть Операционная система Windows 10 версии 2004 или выше. Проверьте текущую версию Windows, щелкнув правой кнопкой мыши на кнопке “Пуск” и выбрав “Система”.
2. Обновления Windows. Убедитесь, что система целиком и полностью обновлена;
3. Включите режима разработчика. Включите режим разработчика в настройках Windows, чтобы активировать дополнительные функции.

В PowerShell от имени администратора выполняем следующие команды:
```bash
wsl --install 
wsl --set-version Ubuntu 2
```
  
Для проверки результата воспользуемся командой wsl.exe -l -v:

```bash    
PS C:\WINDOWS\system32> wsl.exe -l -v
  NAME      STATE           VERSION
* Ubuntu    Stopped         2
```
Если вдруг установлена версия младше 2004 и есть как минимум версия 1903, то в PowerShell от имени администратора активируем подсистему Windows для Linux.
```bash
dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart
```
  
Затем активируем функцию виртуальной машины:
```bash   
dism.exe /online /enable-feature /featurename: VirtualMachinePlatform /all /norestart 
```
После выполнения этих действий перезагрузите компьютер. Когда компьютера запустится, скачиваем и устанавливаем пакет обновлений ядра Linux. Загрузить его можно по [здесь](https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi). В PowerShell выберем 2 версию WSL в качестве основной:
```bash
wsl --set-default-version 2
```
Теперь скачаем какую-нибудь операционную систему на Linux. Сделать это можно прямо магазине приложений Microsoft Store. После установки можно зайти в консоль установленной системы через меню поиска.

## Установка Git

Наконец для оптимального старта понадобится Git. Не буду повторяться. Когда-то давно я также писал гайд по установке этого инструмента. Прочитать его можно [здесь](https://stdout.media/install-git/). Там описан процесс для каждой из операционных систем.
Также, для полного понимания рекомендую пройти курс по Git, который мы делали вместе с командой Merion Academy – [тык](https://wiki.merionet.ru/merion-academy/courses/git-i-github-s-nulya/).

## Конец
Если заметили ошибку или неточность – предлагайте исправление. Я буду только рад. Удачи в изучении Node.js!

## Полезные ссылки
Тут я собрал ссылки из статьи и гайды по теме от других авторов. Вдруг они подойдут больше.

[Официальный сайт Node.js](https://nodejs.org/en)

[Документация по WSL](https://learn.microsoft.com/en-us/windows/wsl/)

[Homebrew](https://brew.sh/)

[nvm-windows на GitHub](https://github.com/coreybutler/nvm-windows)

[Как установить Git](https://stdout.media/install-git/)

[Курс по Git](https://wiki.merionet.ru/merion-academy/courses/git-i-github-s-nulya/)

[Установка Node.js в Windows](https://timeweb.cloud/tutorials/nodejs/kak-ustanovit-node-js-na-windows)

[Установка Node.js в MacOS](https://www.geeksforgeeks.org/how-to-install-nodejs-on-macos/)
